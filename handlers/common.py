"""
Common handlers for public commands.
Handles /start and /help commands.
"""

import logging
from aiogram import Router
from aiogram.types import Message
from aiogram.filters import Command

logger = logging.getLogger(__name__)
router = Router(name="common")


@router.message(Command("start"))
async def cmd_start(message: Message) -> None:
    """Handle /start command - welcome message."""
    try:
        welcome_text = """
üçΩ <b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Utro Bot!</b>

–Ø –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ –∫—É–ª–∏–Ω–∞—Ä–Ω—ã–º –ø—Ä–∞–∑–¥–Ω–∏–∫–∞–º! üéâ

<b>–ß—Ç–æ —è —É–º–µ—é:</b>
‚Ä¢ üìÖ –ö–∞–∂–¥–æ–µ —É—Ç—Ä–æ –ø—É–±–ª–∏–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞—Ö –µ–¥—ã
‚Ä¢ ü•ó –ì–µ–Ω–µ—Ä–∏—Ä—É—é –ü–ü-—Ä–µ—Ü–µ–ø—Ç—ã (–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ)
‚Ä¢ ü§ñ –ò—Å–ø–æ–ª—å–∑—É—é AI –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
‚Ä¢ üé® –°–æ–∑–¥–∞—é –∫—Ä–∞—Å–∏–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–ª—é–¥

<b>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ—Ü–µ–ø—Ç–æ–≤:</b>
‚Ä¢ –ë–µ–∑ —Å–∞—Ö–∞—Ä–∞ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º —ç—Ä–∏—Ç—Ä–∏—Ç, –∞–ª–ª—é–ª–æ–∑—É, —Å—Ç–µ–≤–∏—é
‚Ä¢ –¶–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤–∞—è –º—É–∫–∞ –≤–º–µ—Å—Ç–æ –±–µ–ª–æ–π
‚Ä¢ –û–±–µ–∑–∂–∏—Ä–µ–Ω–Ω—ã–µ –º–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
‚Ä¢ –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Å–ª–∞

–ü–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å –Ω–∞ –∫–∞–Ω–∞–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —É—Ç—Ä–µ–Ω–Ω–∏–µ –ø–æ—Å—Ç—ã! ‚òÄÔ∏è

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /help –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
"""
        await message.answer(welcome_text, parse_mode="HTML")
        logger.info(f"User {message.from_user.id} started the bot")
    except Exception as e:
        logger.error(f"Error in cmd_start: {e}", exc_info=True)
        await message.answer("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")


@router.message(Command("help"))
async def cmd_help(message: Message) -> None:
    """Handle /help command - bot description and features."""
    try:
        help_text = """
üìö <b>–°–ø—Ä–∞–≤–∫–∞ –ø–æ Utro Bot</b>

<b>–û –±–æ—Ç–µ:</b>
–≠—Ç–æ—Ç –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—É–±–ª–∏–∫—É–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø–æ—Å—Ç—ã –æ –∫—É–ª–∏–Ω–∞—Ä–Ω—ã—Ö –ø—Ä–∞–∑–¥–Ω–∏–∫–∞—Ö —Å –ü–ü-—Ä–µ—Ü–µ–ø—Ç–∞–º–∏ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ).

<b>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:</b>
üìÖ –ü–æ—Å—Ç—ã –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 8:00 –ø–æ –º–æ—Å–∫–æ–≤—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏

<b>–ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç –∫–∞–∂–¥—ã–π –ø–æ—Å—Ç:</b>
‚Ä¢ ‚òÄÔ∏è –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ —Å –º–æ—Ç–∏–≤–∏—Ä—É—é—â–µ–π —Ü–∏—Ç–∞—Ç–æ–π
‚Ä¢ üéâ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞—Ö –µ–¥—ã —Å–µ–≥–æ–¥–Ω—è
‚Ä¢ ü•ó –ü–æ–ª–µ–∑–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç –±–µ–∑ —Å–∞—Ö–∞—Ä–∞
‚Ä¢ üñº –ö—Ä–∞—Å–∏–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–ª—é–¥–∞

<b>–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:</b>
/start ‚Äî –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã
/help ‚Äî –≠—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞

<b>–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ (–ü–ü):</b>
–í—Å–µ –Ω–∞—à–∏ —Ä–µ—Ü–µ–ø—Ç—ã —Å–ª–µ–¥—É—é—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –∑–¥–æ—Ä–æ–≤–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è:
‚Ä¢ üö´ –ë–µ–∑ —Ä–∞—Ñ–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–∞—Ö–∞—Ä–∞
‚Ä¢ ‚úÖ –ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ –ø–æ–¥—Å–ª–∞—Å—Ç–∏—Ç–µ–ª–∏
‚Ä¢ ‚úÖ –¶–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
‚Ä¢ ‚úÖ –ù–µ–∂–∏—Ä–Ω—ã–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã

<b>–ö–æ–Ω—Ç–∞–∫—Ç:</b>
–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –∫–∞–Ω–∞–ª–∞.
"""
        await message.answer(help_text, parse_mode="HTML")
        logger.info(f"User {message.from_user.id} requested help")
    except Exception as e:
        logger.error(f"Error in cmd_help: {e}", exc_info=True)
        await message.answer("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")
